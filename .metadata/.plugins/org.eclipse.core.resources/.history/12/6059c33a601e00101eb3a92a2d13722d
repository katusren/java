package chapter06;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;

public class GUIUpDownGame extends JFrame {
    private int answer;
    private int tries = 0;

    private JTextField inputField;
    private JButton guessButton;
    private JLabel resultLabel;
    private JLabel triesLabel;

    public GUIUpDownGame() {
        // ëœë¤ ìˆ«ì ìƒì„±
        answer = new Random().nextInt(100) + 1;

        // í”„ë ˆì„ ê¸°ë³¸ ì„¤ì •
        setTitle("ğŸ® Up-Down Game");
        setSize(400, 250);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null); // í™”ë©´ ì¤‘ì•™ì— í‘œì‹œ
        setLayout(new GridLayout(5, 1));

        // í°íŠ¸ ì„¤ì •
        Font font = new Font("Arial", Font.BOLD, 18);

        // ìƒë‹¨ ì•ˆë‚´ ë©”ì‹œì§€
        JLabel titleLabel = new JLabel("Guess a number between 1 and 100!", SwingConstants.CENTER);
        titleLabel.setFont(font);
        titleLabel.setForeground(new Color(0, 102, 204));
        add(titleLabel);

        // ì…ë ¥ í•„ë“œ
        inputField = new JTextField();
        inputField.setFont(font);
        add(inputField);

        // ë²„íŠ¼
        guessButton = new JButton("Guess");
        guessButton.setFont(font);
        guessButton.setBackground(new Color(51, 204, 51));
        guessButton.setForeground(Color.WHITE);
        add(guessButton);

        // ê²°ê³¼ ë©”ì‹œì§€
        resultLabel = new JLabel(" ", SwingConstants.CENTER);
        resultLabel.setFont(font);
        resultLabel.setForeground(Color.DARK_GRAY);
        add(resultLabel);

        // ì‹œë„ íšŸìˆ˜
        triesLabel = new JLabel("Tries: 0", SwingConstants.CENTER);
        triesLabel.setFont(font);
        add(triesLabel);

        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        guessButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                String text = inputField.getText();
                try {
                    int guess = Integer.parseInt(text);
                    tries++;
                    triesLabel.setText("Tries: " + tries);

                    if (guess < answer) {
                        resultLabel.setText("ğŸ”» Up! Try a higher number.");
                        resultLabel.setForeground(new Color(255, 102, 102));
                    } else if (guess > answer) {
                        resultLabel.setText("ğŸ”º Down! Try a lower number.");
                        resultLabel.setForeground(new Color(255, 102, 102));
                    } else {
                        resultLabel.setText("ğŸ‰ Correct! It was " + answer + "!");
                        resultLabel.setForeground(new Color(0, 153, 76));
                        JOptionPane.showMessageDialog(null, "ğŸ‰ You got it in " + tries + " tries!", 
                            "Congratulations!", JOptionPane.INFORMATION_MESSAGE);
                        resetGame();
                    }

                } catch (NumberFormatException ex) {
                    JOptionPane.showMessageDialog(null, "Please enter a valid number!", 
                        "Error", JOptionPane.ERROR_MESSAGE);
                }
                inputField.setText("");
            }
        });

        setVisible(true);
    }

    // ê²Œì„ ë¦¬ì…‹
    private void resetGame() {
        answer = new Random().nextInt(100) + 1;
        tries = 0;
        triesLabel.setText("Tries: 0");
        resultLabel.setText(" ");
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new GUIUpDownGame());
    }
}